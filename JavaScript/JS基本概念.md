# JavaScript #

# 基本概念 #

(以下内容参考自阮一峰js教程和饥人谷课件)

JavaScript程序的执行单位为行（line），也就是一行一行地执行。一般情况下，每一行就是一个语句。
语句（statement）是为了完成某种任务而进行的操作，比如下面就是一行赋值语句：

`var a = 1 + 3;`

这条语句先用var命令，声明了变量a，然后将1 + 3的运算结果赋值给变量a。

1 + 3叫做表达式（expression），指一个为了得到返回值的计算式。语句和表达式的区别在于，前者主要为了进行某种操作，一般情况下不需要返回值；后者则是为了得到返回值，一定会返回一个值。

凡是JavaScript语言中预期为值的地方，都可以使用表达式。比如，赋值语句的等号右边，预期是一个值，因此可以放置各种表达式。一条语句可以包含多个表达式。

语句以分号结尾，一个分号就表示一个语句结束。多个语句可以写在一行内。

`var a = 1 + 3 ; var b = 'abc';`

分号前面可以没有任何内容，JavaScript引擎将其视为空语句。

`;;;`

上面的代码就表示3个空语句。（关于分号的更多介绍，请看后文《代码风格》一节。）

表达式不需要分号结尾。一旦在表达式后面添加分号，则JavaScript引擎就将表达式视为语句，这样会产生一些没有任何意义的语句。

`1 + 3;
'abc';`

上面两行语句有返回值，但是没有任何意义，因为只是返回一个单纯的值，没有任何其他操作。

## 变量 ##

# 概念  #

变量是对“值”的引用，使用变量等同于引用一个值。每一个变量都有一个变量名。

`var a = 1;`

上面的代码先声明变量a，然后在变量a与数值1之间建立引用关系，也称为将数值1“赋值”给变量a。以后，引用变量a就会得到数值1。最前面的var，是变量声明命令。它表示通知解释引擎，要创建一个变量a。

变量的声明和赋值，是分开的两个步骤，上面的代码将它们合在了一起，实际的步骤是下面这样。

`var a;
a = 1;`

如果只是声明变量而没有赋值，则该变量的值是undefined。undefined是一个JavaScript关键字，表示“无定义”。

`var a;
a // undefined`

如果变量赋值的时候，忘了写var命令，这条语句也是有效的。

`var a = 1;
// 基本等同
a = 1;`

但是，不写var的做法，不利于表达意图，而且容易不知不觉地创建全局变量，所以建议总是使用var命令声明变量。

严格地说，var a = 1 与 a = 1，这两条语句的效果不完全一样，主要体现在delete命令无法删除前者。不过，绝大多数情况下，这种差异是可以忽略的。

如果一个变量没有声明就直接使用，JavaScript会报错，告诉你变量未定义。

`x
// ReferenceError: x is not defined`

上面代码直接使用变量x，系统就报错，告诉你变量x没有声明。

可以在同一条var命令中声明多个变量。

`var a, b;`

JavaScript 是一种动态类型语言，也就是说，变量的类型没有限制，可以赋予各种类型的值。

`var a = 1;
a = 'hello';`

上面代码中，变量a起先被赋值为一个数值，后来又被重新赋值为一个字符串。第二次赋值的时候，因为变量a已经存在，所以不需要使用var命令。

如果使用var重新声明一个已经存在的变量，是无效的。

`var x = 1;
var x;
x // 1`

上面代码中，变量x声明了两次，第二次声明是无效的。

但是，如果第二次声明的同时还赋值了，则会覆盖掉前面的值。
`var x = 1;
var x = 2;`

等同于

`var x = 1;
var x;
x = 2;
`
## 变量提升 ##

JavaScript引擎的工作方式是，先解析代码，获取所有被声明的变量，然后再一行一行地运行。这造成的结果，就是所有的变量的声明语句，都会被提升到代码的头部，这就叫做变量提升（hoisting）。

	console.log(a);
	var a = 1;

上面代码首先使用console.log方法，在控制台（console）显示变量a的值。这时变量a还没有声明和赋值，所以这是一种错误的做法，但是实际上不会报错。因为存在变量提升，真正运行的是下面的代码。

	var a;
	console.log(a);
	a = 1;

最后的结果是显示undefined，表示变量a已声明，但还未赋值。

请注意，变量提升只对var命令声明的变量有效，如果一个变量不是用var命令声明的，就不会发生变量提升。

	console.log(b);
	b = 1;

上面的语句将会报错，提示“ReferenceError: b is not defined”，即变量b未声明，这是因为b不是用var命令声明的，JavaScript引擎不会将其提升，而只是视为对顶层对象的b属性的赋值

## 标识符 ##

标识符（identifier）是用来识别具体对象的一个名称。最常见的标识符就是变量名，以及后面要提到的函数名。JavaScript语言的标识符对大小写敏感，所以a和A是两个不同的标识符。

标识符有一套命名规则，不符合规则的就是非法标识符。JavaScript引擎遇到非法标识符，就会报错。

简单说，标识符命名规则如下：

**第一个字符，可以是任意Unicode字母（包括英文字母和其他语言的字母），以及美元符号（$）和下划线（_）。**
**第二个字符及后面的字符，除了Unicode字母、美元符号和下划线，还可以用数字0-9。**

下面这些都是合法的标识符。

	arg0
	_tmp
	$elem
	π

下面这些则是不合法的标识符。

	1a  // 第一个字符不能是数字
	23  // 同上
	***  // 标识符不能包含星号
	a+b  // 标识符不能包含加号
	-d  // 标识符不能包含减号或连词线

中文是合法的标识符，可以用作变量名。

`var 临时变量 = 1;`

**JavaScript有一些保留字，不能用作标识符：arguments、break、case、catch、class、const、continue、debugger、default、delete、do、else、enum、eval、export、extends、false、finally、for、function、if、implements、import、in、instanceof、interface、let、new、null、package、private、protected、public、return、static、super、switch、this、throw、true、try、typeof、var、void、while、with、yield。**

另外，还有三个词虽然不是保留字，但是因为具有特别含义，也不应该用作标识符：Infinity、NaN、undefined。

## 注释 ##

源码中被JavaScript引擎忽略的部分就叫做注释，它的作用是对代码进行解释。Javascript提供两种注释：一种是单行注释，用//起头；另一种是多行注释，放在/* 和 */之间。

	// 这是单行注释
	
	/*
	 这是
	 多行
	 注释
	*/
	此外，由于历史上JavaScript兼容HTML代码的注释，所以<!--

	和-->也被视为单行注释。

`x = 1; <!-- x = 2;
--> x = 3;`

上面代码中，只有x = 1会执行，其他的部分都被注释掉了。

需要注意的是，-->只有在行首，才会被当成单行注释，否则就是一个运算符。

	function countdown(n) {
	  while (n --> 0) console.log(n);
	}
	
	countdown(3)
	
	// 2
	
	// 1
	
	// 0

上面代码中，n --> 0实际上会当作n-- > 0，因此输出2、1、0。

## 区块 ##

JavaScript使用大括号，将多个相关的语句组合在一起，称为“区块”（block）。

与大多数编程语言不一样，JavaScript的区块不构成单独的作用域（scope）。也就是说，区块中的变量与区块外的变量，属于同一个作用域。

`{
  var a = 1;
}
a // 1`

上面代码在区块内部，声明并赋值了变量a，然后在区块外部，变量a依然有效，这说明区块不构成单独的作用域，与不使用区块的情况没有任何区别。所以，单独使用的区块在JavaScript中意义不大，很少出现。区块往往用来构成其他更复杂的语法结构，比如for、if、while、function等。

[参考链接](http://javascript.ruanyifeng.com/grammar/basic.html)
