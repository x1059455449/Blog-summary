**图片来源均来自于《图解密码技术》**

## 密码工具箱 ##

## 对称加密 ##

## 非对称加密 ##

两个密钥。公钥加密，私钥可解密；私钥加密，公钥可解密。速度慢。

RSA.img

用对称提高速度，用公钥保护回话密钥

RSA2.img

## 单向散列 ##

把一堆数据压缩成固定长度，不能恢复。用于检测完整性。

	MD5
	SHA1，SHA256

单向散列.img

##  消息认证码

散列+共享密钥

img

## 数字签名 ##

img*2

速度更快的签名

img

## 证书 ##

img

PKI体系

img






## SSL/TLS协议流程 ##

	1.浏览器将自己支持的一套加密算法发给服务器，同时发一个浏览器随机数。
	2.服务器向浏览器发送选择的加密算法、服务器生成的随机数、服务器数字证书。
	3.浏览器收到证书后对证书的CA签名进行验证，如果验证通过，会从证书中拿到服务器的公钥。
	4.浏览器对浏览器随机数+服务器随机数进行处理，生成预备主密码。
	5.浏览器用服务器的公钥对预备主密码进行加密，发给服务器。
	6.服务器收到后使用自己的私钥解密出预备主密钥。
	7.浏览器和服务器分别使用预备主密钥和两个随机数，生成共享主密钥
	8.二者使用共享主密钥，使用对称加密算法加密数据。

## 常见问题

每次https请求，都需要使用上面的流程握手协商吗？

	第一次协商主密钥后，后面的请求就使用主密钥进行对称加密通信，不需要再协商。通过会话id来识别。

## 参考 ##

[阮一峰-SSL/TLS协议运行机制的概述](http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html)